Find all functions $f:\mathbb{R}\rightarrow\mathbb{R}$ that satisfy
\[
f(x^2-y)+2yf(x)=f(f(x))+f(y)
\]for all $x,y\in\mathbb{R}$.

(USAJMO 2024 Problem 5, Proposed by Carl Schildkraut)